<!doctype html>
<html class="bg">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <script src="../scripts/faq.js"></script>
    {squarespace-headers}
  </head>
  {@|apply googleAnalytics.block}
  <script>
    var descriptionArray=[]
  </script>
  <body id="{squarespace.page-id}" class="{squarespace.page-classes}">
    
    
      <main class="content-container" role="main"  id="top" data-content-field="main-content">
      
        <squarespace:navigation navigationId="siteNav" template="site-navigation" />
        <div class="page-hero flex-center-center" {.if item.assetUrl} style="background-image: url('{item.assetUrl}');" {.or} style="background-image: url('{collection.mainImage.assetUrl}');" {.end}>
            <div class="page-hero-content">
                {.if item.title}
                    <a href='/{collection.urlId}' class="no-link-styling">
                        <h3 class="white-text">&larr; {collection.title}</h3>
                    </a>
                    <h1>{.if item.title} {item.title} {.end}</h1>
                    {.if item.excerpt}
                        <h4 class="white-text">{item.excerpt}</h4>
                    {.end}
                {.or}
                    <a class="no-link-styling" href="/{collection.urlId}"><h1>{collection.title}{.section categoryFilter} / {@|safe}{.end} </h1></a>
                    {.if categoryFilter}
                        <a href="/{collection.urlId}">&larr; Back to {collection.title} Homepage</a>
                    {.end}
                    {.if collection.description}
                        <h4>{collection.description|safe}</h4>
                    {.end}
                {.end}
                
            </div>
        </div>
        
        {#  single blog post  }
        {.if item.title}
        <section class="basic-padding">
            {squarespace.main-content}
        </section>
        {.or}

        {#  multiple blog posts}
        <section>    
        {.if categoryFilter}
            {.section collection}
                <div class="flex-center-start tag-navigation basic-padding-left-right flex-wrap">
                    <p class="bold-text white-text">View other article categories: &nbsp;</p>
                    {.repeated section categories}
                    <a href="/faq-resources?category={@}" class="no-link-styling {@|slugify}-order">
                        <div class="tag-nav-link white-text ">{@}</div>
                    </a>
                    {.end}
                </div>
            {.end}
            {.section categoryFilter}
                <p class="basic-padding-left-right"><i>Showing articles with "{@|safe}" category</i></p>
                {#  hide active category link  }
                <script>
                    var activeCategoryName = "{@|slugify}-order"
                    var activeCategory = document.getElementsByClassName(activeCategoryName);
                    if (activeCategory.length > 0) {activeCategory[0].style.display = "none";}
                </script>
            {.end}
            <div class="flex-start-center flex-wrap basic-padding-left-right">
            
                {.repeated section items}
                <a class="no-link-styling" href='{.if sourceUrl} {sourceUrl} {.or} {fullUrl} {.end}'>
                    <article id="post-{id}" class="summary-card {@|item-classes} {.repeated section categories}{@|slugify} {.end}" data-item-id="{id}" >
                        <div class="summary-image-card" style="background-image: url({assetUrl})"></div>
                        <h3 class="summary-title-card no-link-styling">{title}</h3>
                        {.section tags}
                            {.if tags}{.repeated section tags}
                            {@}
                            {.end}{.end}
                        {.end}
                        {.if excerpt}
                        <p class="summary-excerpt-card">{excerpt|safe}</p>
                        {.end}
                        <a style="font-size: 12px;">Read more &rarr;</a>
                    </article>
                </a>
                {.or}
                    <p><em>No posts for this category yet.</em></p>
                {.end}
            </div>
        {.or}{#  FULL BLOG PAGE  }

        {#  Add all items to arrays  }
        {.repeated section items}
            <script>
                var article = {
                "title": `{title}`,
                "excerpt": `{.if excerpt}{excerpt}{.end}`,
                "excerptTruncated": `{.if excerpt}{excerpt|truncate 50}{.end}`,
                "url": "{.if sourceUrl}{sourceUrl}{.or}{fullUrl}{.end}",
                "categories": ["{.repeated section categories}{@|slugify}{.alternates with}, {.end}"],
                "assetUrl": "{assetUrl}",
                "featured": {starred},
                "datePublished": {publishOn}
                };
                console.log(article)
                addArticle(article);
            </script>
        {.end}
            {#  Create each category section button  }
            {.section collection}
            <div class="flex-center-start tag-navigation flex-wrap" >
                <p class="bold-text white-text">Jump to section: &nbsp;</p>
                {.repeated section categories}
                <a href="#{@|slugify}-section" class="no-link-styling {@|slugify}-order">
                    <div class="tag-nav-link white-text">{@}</div>
                </a>
                {.end}
            </div>
            
            {#  Create each category section  }
            <div class="flex-start-start flex-column" style="margin-top: 50px;">
            {.repeated section categories}
                <div id="{@|slugify}-section" class="{@|slugify}-order">
                    <div class="blog-category-section">
                        <h2 class="white-text">{@}</h2>
                    </div>
                    <div class="faq-homepage-category-section basic-padding-top-bottom flex-start-start full-width">
                        <div class="faq-homepage-category-featured-section full-width" id="{@|slugify}-featured-section"></div>
                        <div class="faq-homepage-category-all-section-wrapper">
                            <div class="faq-homepage-category-all-section full-width flex-start-start flex-column" id="{@|slugify}-all-section"></div>
                            <a href="/faq-resources?category=Resources" class="hover"><button class="small-button hover" style="font-size: 12px;">All {@} articles &rarr;</button></a>
                        </div>
                    </div>
                </div>
            {.end}
            </div>
            <script>buildFaq(categoriesMap)</script>
                

            {.end}
            <div id="WhatIsADAS-Anchor" class="grid-bg">
                <div class="banner-bg" style="margin-bottom: -25px;">
                    <squarespace:block-field id="WhatIsADAS-Description" columns="1" />        
                </div>
                <squarespace:query collection="glossary" tag="diagram" limit="20">
            
                    {.repeated section items}
                    <script>
                    var description = `
                    <div id='{urlId}-text' className="diagram-feature-description fade-in">
                        <h3>{title}</h3>
                        <p>{excerpt|safe}</p>
                    </div>`
                    descriptionArray.push(description)
                    </script>
                    {.end}                        
                </squarespace:query>
                
                {@|apply adasDiagram.block}
                <squarespace:block-field id="ViewGlossaryButton" columns="1" />
            </div>
        {.end}


            <div style="display: none">
            {squarespace.main-content}
            </div>
        </section>
{.end}
      </main>

    
    <squarespace:script src="site.js" combo="{.if authenticatedAccount}false{.or}true{.end}" />
    {squarespace-footers}

  </body>
</html>
